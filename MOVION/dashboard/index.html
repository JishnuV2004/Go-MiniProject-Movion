<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="config/config.js"></script>

  <style>
    .sidebar-scroll {
      max-height: calc(100vh - 4rem);
      overflow: auto;
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800">

<!-- <script>
// üîê PROTECT DASHBOARD: If no token ‚Üí redirect to login
if (!localStorage.getItem("token")) {
  window.location.href = "adminlogin.html";
}
</script> -->

<div class="min-h-screen flex">

  <aside class="w-72 bg-white border-r shadow-sm">
    <div class="p-4 border-b flex items-center gap-3">
      <div class="h-10 w-10 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded flex items-center justify-center text-white font-bold">
        MB
      </div>
      <div>
        <div class="font-semibold">Movion Admin</div>
        <div class="text-xs text-slate-500">Administrator</div>
      </div>
    </div>

    <nav class="p-4 space-y-1 sidebar-scroll">
      <button onclick="loadComponent('dash')" class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-slate-100">Dashboard</button>
      <button onclick="loadComponent('screens')" class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-slate-100">Screens</button>
      <button onclick="loadComponent('movies')" class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-slate-100">Movies</button>
      <button onclick="loadComponent('users')" class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-slate-100">Users</button>
      <button onclick="loadComponent('shows')" class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-slate-100">Shows</button>

      <div class="border-t my-3"></div>

      <button onclick="logout()" 
              class="w-full px-3 py-2 text-left rounded text-red-600 hover:bg-red-50">
        Logout
      </button>
    </nav>

  </aside>

  <main class="flex-1 p-6">
    <header class="flex items-center justify-between mb-6">
      <h1 id="pageTitle" class="text-2xl font-semibold">Dashboard</h1>

      <div class="flex items-center gap-3">
        <div class="text-sm text-slate-500">Welcome, Admin</div>
        <div class="h-9 w-9 rounded-full bg-slate-200 flex items-center justify-center">A</div>
      </div>
    </header>

    <div id="content"></div>
  </main>

</div>

<script>
async function loadComponent(name) {
  const res = await fetch(`components/${name}.html`);
  const html = await res.text();

  document.getElementById("pageTitle").innerText =
    name.charAt(0).toUpperCase() + name.slice(1);

  const content = document.getElementById("content");
  content.innerHTML = html;

  const scripts = content.querySelectorAll("script");
  scripts.forEach(old => {
    const s = document.createElement("script");
    s.textContent = old.textContent;
    document.body.appendChild(s);
  });
}

// üî¥ LOGOUT FUNCTION
function logout() {
  // localStorage.removeItem("token");  // remove token
  window.location.href = "login.html"; // redirect to login
}

// Load default dashboard
loadComponent("dash");
</script>

</body>
</html>
